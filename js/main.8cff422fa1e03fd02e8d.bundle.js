"use strict";(self.webpackChunkahj_8_3_sse_ws_frontend=self.webpackChunkahj_8_3_sse_ws_frontend||[]).push([[179],{506:()=>{class t{constructor(t){this.container=null,this.url=t,this.onAction=this.onAction.bind(this),this.onFreekick=this.onFreekick.bind(this),this.onGoal=this.onGoal.bind(this)}static cleanDate(t){const i=t.split(" ");return this.date=[i[1],i[0].slice(0,-1)].join(" "),this.date}init(){this.checkBinding(),this.sse=new EventSource(this.url),this.sse.addEventListener("action1",this.onAction),this.sse.addEventListener("action2",this.onAction),this.sse.addEventListener("freekick",this.onFreekick),this.sse.addEventListener("goal",this.onGoal)}onAction(i){if(i.data){const e=JSON.parse(i.data);this.container.insertAdjacentHTML("beforeend",`<li class="list__item">\n      <div class="list-item__date">${t.cleanDate(e.date)}</div>\n      <div class="list-item__comment">\n        <div class="list-item__icon"></div>\n        <div class="list-item__text">${e.comment}</div>\n      </div>\n    </li>`)}}onFreekick(i){if(i.data){const e=JSON.parse(i.data);this.container.insertAdjacentHTML("beforeend",`<li class="list__item">\n      <div class="list-item__date">${t.cleanDate(e.date)}</div>\n      <div class="list-item__comment">\n        <div class="list-item__icon freekick"></div>\n        <div class="list-item__text">${e.comment}</div>\n      </div>\n    </li>`)}}onGoal(i){if(i.data){const e=JSON.parse(i.data);this.container.insertAdjacentHTML("beforeend",`<li class="list__item">\n      <div class="list-item__date">${t.cleanDate(e.date)}</div>\n      <div class="list-item__comment">\n        <div class="list-item__icon goal"></div>\n        <div class="list-item__text">${e.comment}</div>\n      </div>\n    </li>`)}}bindToDOM(t){if(!(t instanceof HTMLElement))throw new Error("container is not HTMLElement");this.container=t}checkBinding(){if(null===this.container)throw new Error("Table not bind to DOM")}}const i=new t("https://salty-bayou-98244.herokuapp.com/sse");i.bindToDOM(document.querySelector(".page__list")),i.init()}},t=>{var i;i=506,t(t.s=i)}]);